<template>
	<div>
		<ChatHandler ref="ChatHandler" uri=":4114" server_name="chat server"/>
		<SmallButton class="send_message" text="Send a test message" @click="test"/>

		<h1>Chat</h1>
		<div class="row">
		<div class="column" id="rooms">
			ROOM 1
			<br>
			ROOM 2
			<br>
			ROOM 3
		</div>
		<div class="column" id="chat-column">
			<p id="messages">Lorem ipsum dolor sit amet consectetur adipisicing elit. Velit, possimus ipsum qui laboriosam aliquam asperiores commodi, ex alias inventore necessitatibus dignissimos et quo consequatur? Quibusdam placeat dicta maiores iste, esse sequi corrupti, doloribus velit aliquid delectus eligendi doloremque nihil iusto minima alias atque ab debitis labore cupiditate vel aspernatur maxime quo similique! Quibusdam vero aut eligendi? A perspiciatis vero minus cupiditate vitae minima placeat itaque, expedita earum eum soluta autem officiis nesciunt voluptate iure sint eligendi possimus cumque? Magni fuga, explicabo enim amet dolorum vero ad porro voluptatibus nihil deserunt laboriosam consequatur, perferendis odit animi reiciendis odio exercitationem facere quia maiores accusamus adipisci. Pariatur ullam, aperiam dicta asperiores alias explicabo, ducimus autem sit eius maiores possimus cumque animi non deleniti facere et error architecto? Eveniet sunt provident ipsa necessitatibus modi accusantium id, maiores possimus odio debitis ipsam reiciendis sequi earum nulla expedita neque nostrum voluptate hic ad qui, est commodi numquam? Quia aliquam quibusdam praesentium. Sint maxime recusandae, reprehenderit earum eligendi deleniti dolor ex delectus facere eos placeat necessitatibus ut atque voluptates iusto hic vel natus quo corporis odit ratione? Voluptatum nostrum cumque facere harum accusamus suscipit iure quaerat quam eos consequatur ut dignissimos autem ullam, natus modi praesentium et aliquid ratione labore! Eaque temporibus et blanditiis similique praesentium, ullam, dolorum repellendus distinctio dolorem quo aut dolore a tempora quis. Culpa rerum iste quasi praesentium magnam voluptate ipsam animi. Alias blanditiis enim aspernatur ab possimus voluptatum voluptates, optio iusto beatae aliquid aut consequuntur et. Alias rerum corporis ex dignissimos id provident sunt nulla obcaecati nam laudantium? Rem cumque eveniet quos ut itaque accusantium quaerat reiciendis exercitationem distinctio ipsum ex expedita nam ducimus ad quisquam consequuntur commodi impedit nemo repellendus dolores, quidem eaque accusamus sapiente. Optio asperiores quisquam molestiae quo minima atque corporis illum accusamus, beatae voluptatibus inventore accusantium suscipit facere eligendi impedit laudantium aspernatur iure neque est numquam animi eum? Deserunt animi velit, vero mollitia alias quod veritatis, optio odit reiciendis voluptatem adipisci minus pariatur repudiandae culpa ut voluptas maiores quos amet. Sunt soluta voluptatem vero accusantium, harum quam, esse velit explicabo neque hic pariatur exercitationem, atque consectetur perferendis fugiat nesciunt porro quis? Quibusdam, eum aut cum reprehenderit quaerat et odio nihil nulla aliquid perferendis fugit distinctio labore magni, tempora excepturi doloribus voluptate ea hic reiciendis libero dolores at fugiat incidunt alias. Ipsam aliquam vitae, aliquid consequatur sunt debitis culpa fugiat fugit exercitationem, ducimus numquam vero sapiente excepturi eius asperiores incidunt quos ratione sit quod reprehenderit. Amet laborum dolore iste nesciunt veniam quam dignissimos quasi tempora? Quaerat ab consectetur repudiandae perspiciatis rem, vero quis nemo laboriosam amet illo! Provident eaque culpa accusamus itaque eius corporis, sequi inventore ex hic deleniti perspiciatis quibusdam veritatis voluptas vel quam distinctio incidunt minus ad officiis, cupiditate dicta pariatur. Quod minima earum reprehenderit nam explicabo ducimus officia soluta consectetur similique, voluptas ut, ex perferendis nesciunt vero hic ullam delectus numquam laboriosam sed rerum. Doloremque ducimus eligendi quam neque aspernatur dignissimos voluptates, maiores magnam dicta cum iusto reiciendis, perferendis consequatur eaque saepe facere omnis nostrum, sapiente unde. Accusamus natus explicabo laborum obcaecati nihil quisquam optio molestiae ex repellat odit tempore hic veritatis commodi aliquam consequuntur, nobis impedit dignissimos alias. Molestias possimus modi minima? Commodi, facilis blanditiis! Corporis, quia! Fuga modi eveniet temporibus, cumque rerum nihil pariatur explicabo facere deserunt, dolor enim quisquam iusto. Cumque illo quas ab! Minus quas inventore doloremque est architecto fugiat! Modi soluta similique incidunt nostrum exercitationem. Iure est asperiores dignissimos unde tempora suscipit et, consectetur nemo ratione vel, aspernatur sapiente totam eveniet neque ipsum quidem, veritatis voluptates quos reiciendis. Perferendis doloremque animi quam libero placeat unde, in eligendi, ex obcaecati ea at, esse necessitatibus vel? Deleniti vitae quasi nemo, nulla amet assumenda quia, tempora iure placeat quaerat quam earum nobis asperiores ullam repudiandae? Libero doloribus dignissimos consequuntur error, eum, aliquid possimus minus amet magnam vero alias. Sed quis, fuga voluptatibus ullam fugiat officiis reiciendis quisquam! Aperiam qui ex repellendus pariatur velit, soluta eligendi perspiciatis fugiat explicabo amet, animi omnis deserunt provident, quo maxime assumenda iste est perferendis eveniet dolorem a voluptatum? Vitae nemo alias praesentium, delectus ipsam fugiat perspiciatis at optio quaerat magnam deleniti error quos sapiente doloremque ratione consectetur dignissimos aliquid mollitia neque nulla earum facilis ut suscipit autem. Ipsum, excepturi fugiat ad laudantium quasi explicabo ducimus, praesentium iure nostrum unde consectetur commodi illo vel, in quas eaque rem facere aspernatur dolorem repudiandae tenetur expedita? Consectetur, inventore quasi. Aliquam consectetur laboriosam error aut reprehenderit sed obcaecati? Nemo magni recusandae ea praesentium dicta maxime quisquam reprehenderit non possimus voluptate deleniti, alias dolorum, velit commodi voluptas voluptates? Molestiae enim natus maxime voluptate. Maxime porro, excepturi doloremque iure magni nisi harum, nobis consequatur error atque suscipit ipsum unde dolorum vero, in pariatur placeat deserunt officiis. Quasi porro accusamus sint id doloribus cum a, aliquid non tempore dolor? Inventore accusantium dolores quidem, voluptas sapiente corrupti distinctio magnam necessitatibus quia praesentium eius minus quasi dolorem et eveniet, quod nobis id quisquam eum. Dolores sit rem repellat vero eveniet tenetur rerum, debitis voluptate adipisci optio quibusdam officiis fuga aliquam doloribus, corporis laudantium explicabo sequi. Vitae iste veniam earum eius magnam pariatur et nemo nam corrupti tenetur nulla omnis rem tempora dolorem iusto sint, a accusantium minima? Veritatis ipsa mollitia earum autem eligendi asperiores deserunt voluptas atque laudantium sunt pariatur debitis ex quia assumenda praesentium, ipsam vitae perferendis id cum iusto officia odio. In eum, expedita illum nihil vero temporibus fugit. Aut saepe maiores nemo tempore sunt. Odio pariatur voluptatum dolorem ab ipsa, assumenda nulla sed praesentium architecto animi quaerat libero? Odio excepturi repudiandae tempora recusandae soluta voluptatibus sed voluptates libero corporis ea aspernatur praesentium similique quis obcaecati optio nesciunt, et non laborum eius nihil reprehenderit ullam. Quas neque voluptatem, non perspiciatis illum mollitia laudantium. Distinctio ab cumque quod aspernatur, veritatis est magnam ducimus quos eos dignissimos fuga architecto soluta minima alias! Praesentium illum perferendis dolores ducimus officia at corporis eaque, repudiandae voluptates eius. Quo, iste cumque aliquam ad corporis nulla accusamus iure odit impedit necessitatibus est omnis autem laudantium repellat error officia quidem esse numquam temporibus optio?</p>
		</div>
		<div class="column" id="tools">
			TOOLS
		</div>
		</div>

	</div>
</template>

<script lang="ts">
  /*
  should probably rearrange this later in a more logical way
  list of data requirements (fetch() calls) for this view:
  GET:
    - Users
      * id
      * username
      * status
      * is_logged_in

    - Channels
      * id
      * name
      * type
      * owner_id
      * is_closed
      * 
    - Participants
      * id
      * participant_id
      * is_admin
      * is_muted
      * ban_meta
      * channel_id

    - Messages
      * channel_id
      * user_id
      * message

    - Blocked_users
      * id
      * blocked_by_id
      * blocked_user_id
  
  POST:
    - Channels
    - Participants
    - Messages
    - Blocked_users

  PATCH:
    - Channels
    - Participants

  DELETE:
    - Blocked_users
    - Participants

  */

import { defineComponent } from '@vue/runtime-core';
import SmallButton from '../components/SmallButton.vue'
import { Socket } from 'socket.io-client';
import ChatHandler from '../components/ChatHandler.vue';



export default defineComponent({
	components: {
		ChatHandler,
		SmallButton
	},

	data() {
		return {
			chatHandler: undefined as unknown as typeof ChatHandler,
		}
	},

	mounted() {
		this.chatHandler = (this.$refs.ChatHandler as typeof ChatHandler);
	},

	methods: {
		async test() {
			let success = await this.chatHandler.send_message(1, "Hello, this is a test message!");
			if (success) {
				console.log("Message sent!");
			} else {
				console.log("Message failed to be sent!");
			}
		}
	}
})
</script>

<style scoped>

.row {
	margin-left: 60px;
	margin-right: 60px;
}

.column {
	background-color: #f4f4f4;
	float:left;
	padding:10px;
	box-sizing: border-box; /*this adds the border+padding into the width. can also look at flexbox*/
	height: 700px;
}

#rooms {
	font-size: 30px;
	width: 20%;
}

#tools {
	font-size: 30px;
	width: 20%;
}

#messages {
	padding-bottom: 100px;
}

#chat-column {
	height: 700px;
	margin-left: 20px;
	overflow: auto;
	float: left;
	width: 55%;
	font-size: 14pt;
}
</style>